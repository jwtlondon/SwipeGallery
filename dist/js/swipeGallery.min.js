!function(){function t(t,e){function i(t,e,i){null==i&&(i=""),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=n.exec(t);return null==o?i:o[1]}function n(t,e){return onresize=function(){clearTimeout(e),e=setTimeout(t,100)},t}function o(){"undefined"==typeof $f&&void 0==window.loadingVimeoAPI&&(window.loadingVimeoAPI=!0,t.getScript("http://a.vimeocdn.com/js/froogaloop2.min.js").done(a))}function a(){window.loadingVimeoAPI=void 0,t("iframe").each(function(e,i){var n,o;n=t(i),"vimeo"===n.attr("data-type")&&$f(i).addEvent("ready",function(){o=$f(i),n.parent().data("player",o)})})}function s(){"undefined"!=typeof YT&&"undefined"!=typeof YT.Player||void 0!=window.loadingYTAPI||(window.loadingYTAPI=!0,window.onYouTubeIframeAPIReady=r,t.getScript("https://www.youtube.com/iframe_api"))}function r(){window.loadingYTAPI=void 0,t("iframe").each(function(e,i){var n,o;n=t(i),"youtube"===n.attr("data-type")&&(o=new YT.Player(n.attr("id")),n.parent().data("player",o))})}function l(t,e){return this.init(t,e),this}{var d={IDLE_STATE:"idle",AUTOPLAY_STATE:"autoplay"},u={paginator:!0,autoplay:!1,autoplayDelay:5e3,controls:!0,controlsTemplate:'<nav class="controls"><button class="prev carouselControl">Previous</button><button class="autoplay carouselControl">Play/Pause</button><button class="next carouselControl">Next</button></nav>',pagerTemplate:'<nav class="paging">{%forloop%}<button class="pager" data-index="{{index}}">{{index}}</button>{%endforloop%}</nav>',swipeOptions:{speed:400,continuous:!0,disableScroll:!1,stopPropagation:!1}};!function(){var t=0;return function(){return t++}}()}return l.fn=l.prototype,l.fn.t=function(t,e){for(var i in e)t=t.replace(new RegExp("{{"+i+"}}","g"),e[i]);return t},l.fn.init=function(e,i){this.element=e,this.$e=t(this.element),this.container=this.element.children[0],this.slides=this.container.children,this.timer,this.state=d.IDLE_STATE,this.options=t.extend({},u,i||{}),this.initSwipe(),this.buildContols(),this.initControls(),this.initVideos(),this.initResize(),this.options.autoplay===!0&&this.setTimer()},l.fn.buildContols=function(){var e,i,n,o=this;e="",this.options.paginator===!0&&(i=this.options.pagerTemplate.split("{%forloop%}"),e+=i[0],i=i[1].split("{%endforloop%}"),n=i[0],t(this.slides).each(function(t){e+=o.t(n,{index:t})}),e+=i[1]),this.options.controls===!0&&(e+=this.options.controlsTemplate),this.$e.append(e)},l.fn.initResize=function(){var e=this,i=t(".video-proxy");i.length>0&&(n(function(){e.onResize(i)}),e.onResize(i)),this.options.paginator===!0&&(this.pageButtons=this.$e.find(".pager"),this.pageButtons.on("click",function(t){return t.preventDefault(),e.changeSlide(t.target),!1}).eq(0).addClass("active"))},l.fn.onResize=function(e){e.each(function(e,i){var n=t(i).parent();n.hasClass("youtube-slide")&&t(i).css("height",n.height()-45),n.hasClass("vimeo-slide")&&t(i).css("height",n.height()-51)})},l.fn.initControls=function(){var t=this;this.options.controls===!0&&(this.$e.find(".next, .prev").on("click",function(e){return e.preventDefault(),t.nextPrevSlide(e.target),!1}),this.$e.find(".autoplay").on("click",function(e){return e.preventDefault(),t.state==d.AUTOPLAY_STATE?t.clearTimer():t.setTimer(),!1})),this.options.paginator===!0&&(this.pageButtons=this.$e.find(".pager"),this.pageButtons.on("click",function(e){return e.preventDefault(),t.changeSlide(e.target),!1}).eq(0).addClass("active"))},l.fn.initSwipe=function(){var i,n=this;this.options.swipeOptions.callback=function(e,o){t(this.slides).removeClass("current").eq(e).addClass("current"),n.pageButtons.removeClass("active").eq(e).addClass("active"),n.options.callback&&n.options.callback.call(this,e,o),t(o).hasClass("youtube-slide")&&(i=t(o).data("player"),(1==i.getPlayerState()||3==i.getPlayerState())&&i.pauseVideo()),t(o).hasClass("vimeo-slide")&&(i=t(o).data("player"),i.api("pause"))},this.options.swipeOptions.transitionEnd=function(t,e){n.options.transitionEnd&&n.options.transitionEnd.call(this,t,e)},this.carousel=e(this.element,this.options.swipeOptions),t(this.slides).eq(0).addClass("current")},l.fn.initVideos=function(){var e,i=this;t(this.slides).each(function(n){e=t(this).find("iframe"),e.length>0&&i.parseVideo(e,t(this),n)})},l.fn.parseVideo=function(t,e,n){var a=t.attr("src"),r=this;if(a.indexOf("youtube.com")>-1)s(),t.attr("data-type","youtube").attr("id","video"+n),e.addClass("resp-frame").addClass("youtube-slide").append('<div class="video-proxy"></div>'),e.find(".video-proxy").data("video",t.get(0)).on("click",function(t){r.toggleVideo(t,"youtube")});else if(a.indexOf("vimeo.com")>-1){var l=i(a,"player_id","video"+n);o(),t.attr("data-type","vimeo").attr("id",l),e.addClass("resp-frame").addClass("vimeo-slide").append('<div class="video-proxy"></div>'),e.find(".video-proxy").data("video",t.get(0)).on("click",function(t){r.toggleVideo(t,"vimeo")})}},l.fn.toggleVideo=function(e,i){var n=t(e.target),o=n.data("video"),a=t(o).parent().data("player");"youtube"==i&&(1==a.getPlayerState()||3==a.getPlayerState()?a.pauseVideo():a.playVideo()),"vimeo"==i&&(console.log("toggle b"),a.api("paused",function(t){a.api(1==t?"play":"pause")}))},l.fn.nextPrevSlide=function(e){var i=this;i.state==d.AUTOPLAY_STATE&&i.setTimer(),t(e).hasClass("next")?this.carousel.next():this.carousel.prev()},l.fn.changeSlide=function(e){this.carousel.slide(parseInt(t(e).data("index"),10),this.options.swipeOptions.speed)},l.fn.setTimer=function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.timerCallback()},this.options.autoplayDelay),this.state=d.AUTOPLAY_STATE,this.$e.find(".autoplay").hasClass("playing")||this.$e.find(".autoplay").addClass("playing")},l.fn.clearTimer=function(){clearTimeout(this.timer),this.$e.find(".autoplay").removeClass("playing"),this.state=d.IDLE_STATE},l.fn.timerCallback=function(){this.carousel.next(),this.setTimer()},l.fn.fixIframeVideos=function(){t(this.slides).find("iframe").each(function(){})},(window.jQuery||window.Zepto)&&!function(t){t.fn.SwipeGallery=function(e){return this.each(function(){t(this).data("SwipeGallery",new l(t(this)[0],e))})}}(window.jQuery||window.Zepto),l}"function"==typeof define&&define.amd?define(["jquery","swipe"],t):window.SwipeGallery=t(window.$,window.Swipe)}();